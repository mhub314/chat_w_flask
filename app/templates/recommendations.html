
<!-- This is the output page -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommendations</title>
    <style>
        .poster {
            width: 100px;
            height: auto;
        }
        .recommendation {
            margin: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Recommendations</h1>
    <div id="recommendations">
        {% if error %}
            <p>{{ error }}</p>
        {% else %}
            {% for rec in recommendations %}
                <div class="recommendation">
                    <p><strong>{{ rec.title }} ({{ rec.year }})</strong></p>
                    <p>Runtime: {{ rec.runtime }} | Streaming on: {{ rec.streaming_service }}</p>
                    {% if rec.poster_url %}
                        <img src="{{ rec.poster_url }}" alt="Poster" class="poster">
                    {% endif %}
                    {% if rec.similarity and rec.explanation %}
                        <p>Similarity: {{ rec.similarity }}</p>
                        <p>{{ rec.explanation }}</p>
                    {% endif %}
                    <p>Critics Score: {{ rec.rotten_tomatoes_critic_score }} | Audience Score: {{ rec.rotten_tomatoes_audience_score }}</p>
                    <p>Synopsis: {{ rec.synopsis }}</p>
                    <p>Reviews: {{ rec.reviews }}</p>
                    <p><a href="{{ rec.imdb_link }}" target="_blank">IMDB Page</a></p>
                </div>
            {% endfor %}
            {% if more_recommendations %}
                <form action="/api/form/recommendations" method="post">
                    <!-- <input type="hidden" name="moreRecommendationsFlag" value="true"> -->
                    <input type="hidden" name="movie" value="{{ movie }}">
                    <input type="hidden" name="genres" value="{{ genres|join(',') }}">
                    <input type="hidden" name="moods" value="{{ moods|join(',') }}">
                    <input type="hidden" name="streaming_services" value="{{ streaming_services|join(',') }}">
                    <input type="hidden" name="moreRecommendationsFlag" value="true">
                    {% for rec in recommendations %}
                        <input type="hidden" name="title" value="{{ rec.title }}">
                        <input type="hidden" name="year" value="{{ rec.year }}">
                        <input type="hidden" name="runtime" value="{{ rec.runtime }}">
                        <input type="hidden" name="streaming_service" value="{{ rec.streaming_service }}">
                        <input type="hidden" name="similarity" value="{{ rec.similarity }}">
                        <input type="hidden" name="explanation" value="{{ rec.explanation }}">
                        <input type="hidden" name="rotten_tomatoes_critic_score" value="{{ rec.rotten_tomatoes_critic_score }}">
                        <input type="hidden" name="rotten_tomatoes_audience_score" value="{{ rec.rotten_tomatoes_audience_score }}">
                        <input type="hidden" name="synopsis" value="{{ rec.synopsis }}">
                        <input type="hidden" name="reviews" value="{{ rec.reviews }}">
                        <input type="hidden" name="imdb_link" value="{{ rec.imdb_link }}">
                        <input type="hidden" name="poster_url" value="{{ rec.poster_url }}">
                    {% endfor %}
                    <input type="submit" value="Get More Recommendations">
                </form>
            {% endif %}
        {% endif %}
    </div>
    <a href="/">Back to form</a>
</body>
</html>
